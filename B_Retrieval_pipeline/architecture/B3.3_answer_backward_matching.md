# B3.3: Answer-Backward Matching Strategy - Architecture Design

## Name
**B3.3: Answer-Backward Matching Strategy**

## Purpose
Matches concepts based on expected answer types and formats working backward from answer expectations to identify concepts most capable of providing the required response format and content validation.

## Input Files
- **Primary**: `outputs/B2_3_answer_expectation_output.json`
- **Secondary**: `../A_concept_pipeline/outputs/A2.5_expanded_concepts.json`
- **Fallback**: `../A_concept_pipeline/outputs/A2.4_core_concepts.json`
- **Contains**: Answer expectations with format specifications and expanded concept vocabularies

## Output Files
- **Primary**: `outputs/B3_3_answer_backward_output.json`
- **Contains**: Answer-capability matches with format compatibility and validation alignment scores

## Processing Logic

### Answer Capability Assessment
- Evaluates **numeric answer capability** through numeric indicator keywords (amount, value, revenue, percentage) with domain bonuses
- Assesses **date answer capability** via temporal keywords (year, date, time, period, quarter) with reasonable confidence weighting
- Determines **boolean answer capability** with universal moderate scoring (0.4) reflecting general answerability
- Measures **list answer capability** based on vocabulary richness (â‰¥3 keywords boost) for multiple item responses

### Format Compatibility Evaluation
- Analyzes **unit specification matching** between answer format requirements and concept domain alignments
- Assesses **precision requirements** compatibility with concept type and domain characteristics
- Evaluates **context provision capability** using concept importance scores for context-required answers
- Determines **calculation support** through domain-specific analysis (financial domain bonus for computational questions)

### Validation Criteria Alignment
- Matches **required content elements** (numbers, units, specific terms) against concept vocabularies
- Calculates **validation alignment scores** based on concept's ability to satisfy answer validation requirements
- Assesses **format compliance potential** through unit presence and domain-specific term availability
- Integrates **answer confidence factors** from expectation analysis for reliability weighting

### Combined Scoring Integration
- Combines **answer capability** (70% weight) with **validation alignment** (30% weight) for overall match scoring
- Applies **format compatibility bonuses** based on concept's ability to provide expected answer format
- Generates **comprehensive capability assessment** including format provision and validation satisfaction indicators
- Limits results to **top 8 matches** reflecting supporting role in overall matching strategy

## Key Decisions

### Capability Weighting Schema
- **Decision**: Weight answer capability (70%) higher than validation alignment (30%)
- **Rationale**: Prioritizes concept's fundamental ability to address question type over specific validation criteria
- **Impact**: Emphasizes conceptual relevance while incorporating validation requirements as secondary factor

### Domain-Specific Capability Bonuses
- **Decision**: Apply significant bonuses for domain-aligned capabilities (financial domain 0.3 bonus for numeric questions)
- **Rationale**: Domain expertise typically correlates with higher-quality answers for domain-specific question types
- **Impact**: Improves domain-specific matching but creates domain-dependent scoring variations

### Result Set Size Limitation
- **Decision**: Limit to top 8 matches rather than 10 like other strategies
- **Rationale**: Reflects supporting role of answer-backward matching in overall weighted strategy combination
- **Impact**: Provides focused high-quality matches while maintaining computational efficiency

### Format Compatibility Integration
- **Decision**: Include detailed format compatibility assessment rather than simple type matching
- **Rationale**: Enables precise answer validation and quality assessment for generated responses
- **Impact**: Provides comprehensive format guidance but increases matching complexity

### Validation Alignment Calculation
- **Decision**: Use direct keyword matching for validation criteria rather than semantic similarity
- **Rationale**: Ensures strict compliance with answer validation requirements for quality control
- **Impact**: Provides objective validation assessment but may miss semantically equivalent terms

### Universal Boolean Capability
- **Decision**: Assign moderate boolean capability (0.4) to all concepts rather than specific assessment
- **Rationale**: Most concepts can theoretically support yes/no questions with appropriate context
- **Impact**: Maintains consistent boolean matching but may not reflect actual boolean answer quality differences