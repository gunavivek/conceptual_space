# A1.2: Document Domain Detector - Architecture Design

## Name
**A1.2: Document Domain Detector**

## Purpose
Detects and classifies document domains using keyword-based analysis and rule-based classification to categorize documents into specialized knowledge domains for domain-aware concept processing.

## Input File
- **Primary**: `outputs/A1.1_document_reader_output.json`
- **Contains**: Loaded documents with standardized text content and metadata

## Output Files
- **Primary**: `outputs/A1.2_domain_detection_output.json`
- **Secondary**: `outputs/A1.2_domain_detection_output.meta.json`
- **Contains**: Documents with domain classifications, confidence scores, and domain distribution statistics

## Processing Logic

### Domain Classification Framework
- Implements **keyword-based domain detection** using curated domain vocabulary dictionaries
- Supports **multiple domain categories**: finance, healthcare, technology, legal, general
- Applies **weighted keyword scoring** where domain-specific terms contribute to classification confidence
- Uses **threshold-based classification** with configurable confidence requirements for domain assignment

### Domain Vocabulary Management
- Maintains **curated domain dictionaries** with expert-selected terminology for each knowledge domain
- Implements **hierarchical keyword weighting** with core terms receiving higher classification weights
- Supports **domain-specific pattern recognition** for financial metrics, healthcare terminology, and technical concepts
- Provides **general domain fallback** for documents not matching specialized domain patterns

### Classification Confidence Calculation
- Calculates **domain scores** as normalized keyword match frequency weighted by term importance
- Applies **document length normalization** to ensure fair scoring across varying document sizes
- Implements **competing domain analysis** comparing scores across all domain categories
- Generates **classification confidence** based on margin between top-scoring and runner-up domains

### Domain Distribution Analysis
- Tracks **domain assignment statistics** across entire document collection
- Calculates **domain coverage ratios** showing distribution of specialized versus general content
- Identifies **multi-domain documents** with significant scores across multiple domain categories
- Generates **domain quality metrics** including average confidence and classification certainty

## Key Decisions

### Keyword-Based Classification Approach
- **Decision**: Use manually curated keyword dictionaries rather than machine learning classification
- **Rationale**: Ensures interpretable and maintainable domain detection with domain expert input
- **Impact**: Provides reliable domain classification but requires ongoing vocabulary maintenance

### Domain Category Selection
- **Decision**: Support five primary domains (finance, healthcare, technology, legal, general) rather than extensive taxonomy
- **Rationale**: Balances domain specificity with practical processing complexity for concept pipeline
- **Impact**: Provides meaningful domain distinctions while maintaining manageable classification scope

### Confidence Threshold Strategy
- **Decision**: Use configurable confidence thresholds rather than fixed classification rules
- **Rationale**: Enables domain-specific tuning and adaptation to varying document collection characteristics
- **Impact**: Provides classification flexibility but requires threshold optimization for optimal performance

### Multi-Domain Handling Policy
- **Decision**: Assign single primary domain while preserving secondary domain scores in metadata
- **Rationale**: Simplifies downstream processing while maintaining visibility into multi-domain content
- **Impact**: Enables clear domain-based processing paths while preserving classification nuance

### General Domain Fallback
- **Decision**: Assign general domain classification when specialized domain confidence is insufficient
- **Rationale**: Ensures all documents receive domain classification rather than remaining unclassified
- **Impact**: Provides complete domain coverage but may mask subtle domain characteristics

### Vocabulary Weighting Schema
- **Decision**: Apply hierarchical keyword weighting with core terms receiving 2x weight over peripheral terms
- **Rationale**: Emphasizes domain-defining terminology while capturing broader domain vocabulary
- **Impact**: Improves classification accuracy for core domain concepts but requires careful vocabulary curation