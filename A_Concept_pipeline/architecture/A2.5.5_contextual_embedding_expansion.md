# A2.5.5: Contextual Embedding Expansion Strategy - Architecture Design

## Name
**A2.5.5: Contextual Embedding Expansion Strategy**

## Purpose
Expands concepts using contextual embeddings and vector similarity to identify semantically related terms through simulated embedding space analysis and contextual pattern recognition.

## Input File
- **Primary**: `outputs/A2.4_core_concepts.json`
- **Contains**: Core concepts with primary keywords and domain classifications

## Output Files
- **Primary**: `outputs/A2.5.5_contextual_expansion.json`
- **Contains**: Contextual embedding expansions with similarity scores, pattern matches, and context richness metrics

## Processing Logic

### Contextual Pattern Recognition
- Implements **domain-specific pattern libraries** for financial, healthcare, and general domains
- Applies **regular expression patterns** to identify contextual term usage within domain contexts
- Extracts **contextual features** including pattern matches and context-specific terminology
- Filters **stop words and short terms** to maintain contextual relevance quality

### Embedding Similarity Simulation
- Simulates **embedding-based similarity** using deterministic hashing and domain knowledge mappings
- Implements **domain expansion term lookup** for high-quality similarity relationships (0.8 score)
- Applies **morphological similarity detection** through substring and affix analysis (0.4-0.6 scores)
- Provides **baseline similarity** (0.1) for all term pairs to enable broad relationship discovery

### Contextual Term Discovery
- Identifies **contextually similar terms** using configurable similarity threshold (default 0.5)
- Limits expansion to **top 3 similar terms** per original term for vocabulary control
- Organizes **expansion by original term** to maintain attribution and relationship transparency
- Aggregates **expanded vocabularies** while preserving original concept keyword foundations

### Context Quality Assessment
- Calculates **average similarity scores** across all contextual expansions for quality measurement
- Measures **context richness** as ratio of original terms receiving expansions to total original terms
- Assesses **expansion diversity** through count of unique expansion relationships discovered
- Generates **context coherence metrics** combining similarity scores and expansion distribution

## Key Decisions

### Pattern Library Curation
- **Decision**: Use manually curated contextual patterns rather than learned patterns
- **Rationale**: Ensures reliable pattern quality and domain-specific accuracy for expansion
- **Impact**: Provides consistent expansion quality but requires pattern maintenance and updates

### Similarity Simulation Approach
- **Decision**: Simulate embedding similarity using domain knowledge rather than actual embeddings
- **Rationale**: Avoids external dependencies while providing interpretable similarity relationships
- **Impact**: Enables consistent processing but may miss nuanced semantic relationships

### Similarity Threshold Selection
- **Decision**: Use 0.5 similarity threshold for expansion term inclusion
- **Rationale**: Balances expansion quality with vocabulary growth by requiring moderate similarity
- **Impact**: Ensures semantically relevant expansions but may exclude valuable weak relationships

### Expansion Limit Strategy
- **Decision**: Limit to top 3 similar terms per original term
- **Rationale**: Controls vocabulary explosion while capturing primary contextual relationships
- **Impact**: Maintains processing efficiency but may truncate comprehensive contextual coverage

### Context Richness Measurement
- **Decision**: Measure richness as fraction of original terms receiving expansions
- **Rationale**: Provides interpretable metric for expansion completeness across concept vocabulary
- **Impact**: Enables quality assessment but may not capture expansion quality variations

### Domain Specificity Balance
- **Decision**: Apply domain-specific patterns with general domain fallback
- **Rationale**: Maximizes contextual precision for specialized domains while ensuring universal coverage
- **Impact**: Optimizes expansion quality for known domains but may underperform for novel domains